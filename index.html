<!DOCTYPE html><html><head><title>Docs!!</title><meta name=viewport content="width=device-width, initial-scale=1.0, user-scalable=yes"><link rel=stylesheet href=./assets/dist/css/main.min.css></head><body><layout><row><column class=navigation cols=12 cols-1680=2 cols-1024=4 cols-768=12><nav></nav></column><column class=content cols=12 cols-1680=10 cols-1024=8 cols-768=12><section data-filename=/README.md><article data-line=0><h1 id=inline-docs>Inline Docs</h1><p><em>Embed markdown documentation in code.</em></p><p><a href=http://travis-ci.org/joshwnj/inline-docs><img src=https://secure.travis-ci.org/joshwnj/inline-docs.png alt="Build Status"></a></p><p>Ideally, documentation and code are written in parallel. Good code is self-explanitory as far as the <em>&quot;what&quot;</em> is concerned. Documentation is a way to record the <em>&quot;why&quot;</em>. Linking related parts together helps other developers understand how the system meets business needs and fits together as a whole.</p><h2 id=inline-docs:install>Install</h2><p><code>npm install -g inline-docs</code></p><h2 id=inline-docs:running-from-cli>Running from CLI</h2><p>Run <code>inline-docs &gt; docs.html</code> in your project&#39;s root directory. Creates docs like <a href=http://joshwnj.github.io/inline-docs>http://joshwnj.github.io/inline-docs</a>.</p><p>See <a href=http://joshwnj.github.io/inline-docs/#command-line-interface>Command line interface</a> for more options.</p><h2 id=inline-docs:running-from-javascript>Running from javascript</h2><p>See <a href=http://joshwnj.github.io/inline-docs/#module-entry-point>Module entry point</a> for API details.</p><h2 id=inline-docs:getting-started>Getting started</h2><h3 id=undefined>Writing docs</h3><ul><li><p>all documentation is written in markdown format. You can do this either in a <code>.md</code> file, or embed a markdown document within the comments of a source code file.</p></li><li><p>markdown documents will only be used if they pass some basic validation rules. See <a href=http://joshwnj.github.io/inline-docs/#validating-markdown-documents>Validating markdown documents</a> for details.</p></li></ul><h3 id=undefined>Linking</h3><ul><li>every level-1 and level-2 heading becomes a link anchor.</li><li>to link to a level-1 heading use the heading text in brackets like <code>[[Heading text goes here]]</code>. This will be converted to an html hyperlink when the final docs are generated.</li><li>linking to level-2 headings works the same, except with two parts <code>[[Heading text goes here][And subheading here]]</code></li></ul><h3 id=undefined>Refining sources</h3><ul><li>You may come across cases where you want to exclude certain files from being parsed by <code>inline-docs</code> (eg. to avoid junk in your docs).</li><li>To exclude a single file, add the <code>/* inline-docs:ignore */</code> directive to the top of the file.</li><li>To exclude a set of files, override the patterns defined at <a href=http://joshwnj.github.io/inline-docs/#module-entry-point:default-options>Module entry point: Default options</a>.</li></ul><h2 id=inline-docs:license>License</h2><p>MIT</p><div class=source-ref>Source: <a href=./README.md#L0>/README.md, line 0</a></div></article></section><section data-filename=/docs/project-goals.md><article data-line=0><h1 id=project-goals>Project goals</h1><p>There are many existing tools to help you generate documentation from code, but most of them are geared towards describing APIs. Put more generally, the tools and documentation are focussed on <em>what</em> the code is doing and <em>how</em> to properly call each function. This is useful, but a lot of the time we need to document <em>why</em> things were done in a certain way. Every design-decision and tradeoff made today impacts the possible decisions that can be made tomorrow, and this information is critical to new developers becoming involved in the project.</p><p>Along with this, <code>inline-docs</code> has the following goals:</p><ul><li>There should be <em>a simple standard to follow when documenting code</em>.</li><li>Considering that one part of the codebase often only makes sense in the context of the whole, there should be <em>a natural way to make connections across a codebase</em>. Reading the docs should be like having a guided tour of the code.</li><li>The tool should encourage <em>documenting as a primary development task</em>.</li></ul><div class=source-ref>Source: <a href=./docs/project-goals.md#L0>/docs/project-goals.md, line 0</a></div></article></section><section data-filename=/docs/template-specs.md><article data-line=0><h1 id=template-specs>Template specs</h1><ul><li>any valid html document is fine.</li><li>the placeholder <code></code> must be included somewhere. This will be replaced by the generated docs.</li></ul><div class=source-ref>Source: <a href=./docs/template-specs.md#L0>/docs/template-specs.md, line 0</a></div></article></section><section data-filename=/docs/validating.md><article data-line=0><h1 id=validating-markdown-documents>Validating markdown documents</h1><ul><li>To be considered valid, a source file must have exactly one level-1 heading in the markdown portion.</li><li>Any comments before the level-1 heading are ignored.</li><li>Single-line comments are only included if they begin with a <code>//&gt;</code> (eg. <code>//&gt; comment goes here...</code>)</li></ul><div class=source-ref>Source: <a href=./docs/validating.md#L0>/docs/validating.md, line 0</a></div></article></section><section data-filename=/index.js><article data-line=1><h1 id=module-entry-point>Module entry point</h1><div class=source-ref>Source: <a href=./index.js#L1>/index.js, line 1</a></div></article><article data-line=16><h2 id=module-entry-point:default-options>Default options</h2><p>By default we locate all .js files in the project directory, except for those in the <code>node_modules</code> directory.</p><div class=source-ref>Source: <a href=./index.js#L16>/index.js, line 16</a></div></article><article data-line=25><blockquote><p>make sure README comes first</p></blockquote><div class=source-ref>Source: <a href=./index.js#L25>/index.js, line 25</a></div></article><article data-line=28><blockquote><p>include common source and markdown files</p></blockquote><div class=source-ref>Source: <a href=./index.js#L28>/index.js, line 28</a></div></article><article data-line=34><blockquote><p>exclude node_modules</p></blockquote><div class=source-ref>Source: <a href=./index.js#L34>/index.js, line 34</a></div></article><article data-line=49><blockquote><p>Either write to a file, or to stdout</p></blockquote><div class=source-ref>Source: <a href=./index.js#L49>/index.js, line 49</a></div></article><article data-line=80><blockquote><p>prepend a directive so that the generated file is <em>not</em> included the next time we run <code>inline-docs</code></p></blockquote><div class=source-ref>Source: <a href=./index.js#L80>/index.js, line 80</a></div></article><article data-line=83><blockquote><p>write the template header</p></blockquote><div class=source-ref>Source: <a href=./index.js#L83>/index.js, line 83</a></div></article><article data-line=94><blockquote><p>store heading and link info so we can validate at the end</p></blockquote><div class=source-ref>Source: <a href=./index.js#L94>/index.js, line 94</a></div></article><article data-line=114><blockquote><p>write the template footer</p></blockquote><div class=source-ref>Source: <a href=./index.js#L114>/index.js, line 114</a></div></article></section><section data-filename=/bin/inline-docs.js><article data-line=3><h1 id=command-line-interface>Command line interface</h1><p>Example:</p><pre><code>OUTPUT_FILE=docs.html
TEMPLATE=../path/to/my-custom-template.html
PROJECT_DIR=./path/to/project

inline-docs -o $OUTPUT_FILE --template=$TEMPLATE $PROJECT_DIR
</code></pre><div class=source-ref>Source: <a href=./bin/inline-docs.js#L3>/bin/inline-docs.js, line 3</a></div></article><article data-line=32><blockquote><p>These options are passed into <a class=doc-link href=#module-entry-point>Module entry point</a>.</p></blockquote><div class=source-ref>Source: <a href=./bin/inline-docs.js#L32>/bin/inline-docs.js, line 32</a></div></article><article data-line=36><blockquote><p>Use the <code>--template</code> arg to choose a custom template. Template is expected to be an html file meeting the requirements in <a class=doc-link href=#template-specs>Template specs</a>.</p></blockquote><div class=source-ref>Source: <a href=./bin/inline-docs.js#L36>/bin/inline-docs.js, line 36</a></div></article><article data-line=39><blockquote><p>Use the <code>-o</code> arg to write output to a file (default is to stdout)</p></blockquote><div class=source-ref>Source: <a href=./bin/inline-docs.js#L39>/bin/inline-docs.js, line 39</a></div></article><article data-line=42><blockquote><p>Use <code>--markdown</code> to output as markdown (default is html). Setting this also disables the template.</p></blockquote><div class=source-ref>Source: <a href=./bin/inline-docs.js#L42>/bin/inline-docs.js, line 42</a></div></article><article data-line=47><blockquote><p>Template can be disabled with <code>--template=false</code> if we just want to render the docs with no wrapper.</p></blockquote><div class=source-ref>Source: <a href=./bin/inline-docs.js#L47>/bin/inline-docs.js, line 47</a></div></article></section><section data-filename=/lib/exclude-pre-heading-markdown-tokens.js><article data-line=1><h1 id=exclude-pre-heading-markdown-tokens>Exclude pre-heading markdown tokens</h1><p>Every doc is expected to begin with a level-1 heading, so anything before this is ignored.</p><p>It&#39;s common to see metadata comments near the top of a file which we wouldn&#39;t want to include. Also, expecting a level-1 markdown heading gives the developer a natural way to opt-in so we&#39;re not creating nonsense-documentatation for files that weren&#39;t intended to use comments in this way.</p><div class=source-ref>Source: <a href=./lib/exclude-pre-heading-markdown-tokens.js#L1>/lib/exclude-pre-heading-markdown-tokens.js, line 1</a></div></article></section><section data-filename=/lib/extract-c-comments.js><article data-line=1><h1 id=extract-c-style-comments>Extract C-Style Comments</h1><p>Most source files will use one or both forms of c-style comments (block or single-line), so we can use a generic approach to extracting comments.</p><div class=source-ref>Source: <a href=./lib/extract-c-comments.js#L1>/lib/extract-c-comments.js, line 1</a></div></article></section><section data-filename=/lib/extract-links.js><article data-line=1><h1 id=extract-document-links>Extract Document Links</h1><ul><li>linking to a level-1 heading: <code>[[Overview]]</code>. Renders as <a href=#overview>Overview</a>.</li><li>linking to a level-2 heading: <code>[[Overview][How are docs generated?]]</code>. Renders as <a href=#overview:how-are-docs-generated->Overview&rarr;How are docs generated?</a></li><li><code>[[.][How are docs generated?]]</code> is a relative link to a level-2 heading within the current level-1 section. Renders as <a href=#overview:how-are-docs-generated->&rarr;How are docs generated?</a></li></ul><div class=source-ref>Source: <a href=./lib/extract-links.js#L1>/lib/extract-links.js, line 1</a></div></article><article data-line=12><blockquote><p>pattern that we use to match links</p></blockquote><div class=source-ref>Source: <a href=./lib/extract-links.js#L12>/lib/extract-links.js, line 12</a></div></article><article data-line=15><blockquote><p>split level-1 and level-2 parts</p></blockquote><div class=source-ref>Source: <a href=./lib/extract-links.js#L15>/lib/extract-links.js, line 15</a></div></article><article data-line=30><h2 id=extract-document-links:replace-links>Replace Links</h2><p>Rewrite doclinks in-place.</p><p>Inputs:</p><ul><li>text: string</li><li>replaceFunc: function, will be called with the link parts, and the return value will be used in place of the doclink. Eg. <code>replaceFunc([&#39;Section&#39;, &#39;Subsection&#39;])</code></li></ul><p>Output: string</p><div class=source-ref>Source: <a href=./lib/extract-links.js#L30>/lib/extract-links.js, line 30</a></div></article></section><section data-filename=/lib/find-comments.js><article data-line=12><h1 id=find-comments-in-source-code>Find comments in source code</h1><div class=source-ref>Source: <a href=./lib/find-comments.js#L12>/lib/find-comments.js, line 12</a></div></article><article data-line=19><h2 id=find-comments-in-source-code:zeroing-comment-indentation>Zeroing comment indentation</h2><p>Often a comment will be indented, so we need to make sure that doesn&#39;t affect the markdown interpretation.</p><p>We&#39;ll assume that the leading whitespace on the first non-empty line represents the indentation applied to all lines. We can subtract this from all lines to zero the indentation.</p><div class=source-ref>Source: <a href=./lib/find-comments.js#L19>/lib/find-comments.js, line 19</a></div></article><article data-line=36><blockquote><p>don&#39;t consider empty lines as they are not a reliable indication of indentation</p></blockquote><div class=source-ref>Source: <a href=./lib/find-comments.js#L36>/lib/find-comments.js, line 36</a></div></article><article data-line=63><h2 id=find-comments-in-source-code:determine-whether-a-comment-is-included>Determine whether a comment is included</h2><div class=source-ref>Source: <a href=./lib/find-comments.js#L63>/lib/find-comments.js, line 63</a></div></article><article data-line=73><blockquote><p>single-line comments are only included if they begin with a <code>&gt;</code> (see <a class=doc-link href=#validating-markdown-documents>Validating markdown documents</a>)</p></blockquote><div class=source-ref>Source: <a href=./lib/find-comments.js#L73>/lib/find-comments.js, line 73</a></div></article><article data-line=81><blockquote><p><code>ignore</code> directive is set, so ignore everything in this file (See also <a class=doc-link href=#parsing-directives>Parsing directives</a>)</p></blockquote><div class=source-ref>Source: <a href=./lib/find-comments.js#L81>/lib/find-comments.js, line 81</a></div></article></section><section data-filename=/lib/get-heading-id.js><article data-line=1><h1 id=creating-heading-anchors>Creating heading anchors</h1><p>Each level-1 and level-2 heading can be linked to. We create a unique anchor ID by converting the heading text into a suitable format.</p><div class=source-ref>Source: <a href=./lib/get-heading-id.js#L1>/lib/get-heading-id.js, line 1</a></div></article></section><section data-filename=/lib/parse-directives.js><article data-line=1><h1 id=parsing-directives>Parsing directives</h1><p>Directives allow you to instruct the doc parser how to handle the current file.</p><p>Rules:</p><ul><li>Any single-line comment may contain a directive, in the form of <code>inline-docs:&lt;key&gt; [value]</code>.</li><li>A <code>key</code> may only contain letters and dashes.</li><li>The <code>value</code> is optional, and if omitted we&#39;ll assume <code>key</code> is a flag and set the value to <code>true</code>.</li></ul><div class=source-ref>Source: <a href=./lib/parse-directives.js#L1>/lib/parse-directives.js, line 1</a></div></article><article data-line=18><blockquote><p>ignore multi-line comments</p></blockquote><div class=source-ref>Source: <a href=./lib/parse-directives.js#L18>/lib/parse-directives.js, line 18</a></div></article><article data-line=24><blockquote><p>treat directives without values as a boolean flag</p></blockquote><div class=source-ref>Source: <a href=./lib/parse-directives.js#L24>/lib/parse-directives.js, line 24</a></div></article></section><section data-filename=/lib/process-file.js><article data-line=1><h1 id=process-a-file>Process a file</h1><p>To process source files we extract comments and parse as markdown.</p><p>To process markdown files we treat them as one big comment, so that the data format is consistent.</p><div class=source-ref>Source: <a href=./lib/process-file.js#L1>/lib/process-file.js, line 1</a></div></article><article data-line=27><h2 id=process-a-file:find-document-links-in-comments>Find document links in comments</h2><p>Find doc links with <a class=doc-link href=#extract-document-links>Extract Document Links</a>.</p><div class=source-ref>Source: <a href=./lib/process-file.js#L27>/lib/process-file.js, line 27</a></div></article><article data-line=102><blockquote><p>run the custom handler</p></blockquote><div class=source-ref>Source: <a href=./lib/process-file.js#L102>/lib/process-file.js, line 102</a></div></article><article data-line=106><blockquote><p>unless a custom handler is found, we&#39;ll assume c-style comments</p></blockquote><div class=source-ref>Source: <a href=./lib/process-file.js#L106>/lib/process-file.js, line 106</a></div></article></section><section data-filename=/lib/render-as-html.js><article data-line=1><h1 id=rendering-the-document-as-html>Rendering the document as HTML</h1><p>After extracting comments we need to put it all together. The end result will be:</p><ul><li>a single HTML element containing all content rendered from markdown.</li><li>each level-1 heading is rendered as a section.</li><li>each comment is rendered with an extra element that gives a reference back to the source file it came from.</li><li>before converting markdown to html we also replace special &quot;Doc Links&quot; with the markdown equivalent.</li></ul><div class=source-ref>Source: <a href=./lib/render-as-html.js#L1>/lib/render-as-html.js, line 1</a></div></article><article data-line=33><h2 id=rendering-the-document-as-html:rendering-a-document-link>Rendering a document link</h2><p>This is used as the <code>replaceFunc</code> arg in <a class=doc-link href=#extract-document-links:replace-links>Extract Document Links&rarr;Replace Links</a>.</p><div class=source-ref>Source: <a href=./lib/render-as-html.js#L33>/lib/render-as-html.js, line 33</a></div></article><article data-line=50><h2 id=rendering-the-document-as-html:replacing-document-link-placeholders-with-hyperlinks>Replacing document link placeholders with hyperlinks</h2><p>See also: <a class=doc-link href=#extract-document-links:replace-links>Extract Document Links&rarr;Replace Links</a>.</p><div class=source-ref>Source: <a href=./lib/render-as-html.js#L50>/lib/render-as-html.js, line 50</a></div></article><article data-line=85><blockquote><p>assume the rendered documentation is in the root directory of the repo</p></blockquote><div class=source-ref>Source: <a href=./lib/render-as-html.js#L85>/lib/render-as-html.js, line 85</a></div></article><article data-line=92><blockquote><p>need to add a <code>links</code> property otherwise the markdown parser complains</p></blockquote><div class=source-ref>Source: <a href=./lib/render-as-html.js#L92>/lib/render-as-html.js, line 92</a></div></article><article data-line=95><blockquote><p>replace doc-link placeholders with html anchor links</p></blockquote><div class=source-ref>Source: <a href=./lib/render-as-html.js#L95>/lib/render-as-html.js, line 95</a></div></article><article data-line=107><blockquote><p>display a reference to the source code this comment comes from.</p></blockquote><div class=source-ref>Source: <a href=./lib/render-as-html.js#L107>/lib/render-as-html.js, line 107</a></div></article></section><section data-filename=/lib/render-as-markdown.js><article data-line=1><h1 id=rendering-the-document-as-markdown>Rendering the document as markdown</h1><ul><li>extra info (eg. source references) are rendered as code blocks</li></ul><div class=source-ref>Source: <a href=./lib/render-as-markdown.js#L1>/lib/render-as-markdown.js, line 1</a></div></article><article data-line=27><h2 id=rendering-the-document-as-markdown:rendering-a-document-link>Rendering a document link</h2><p>This is used as the <code>replaceFunc</code> arg in <a class=doc-link href=#extract-document-links:replace-links>Extract Document Links&rarr;Replace Links</a>.</p><div class=source-ref>Source: <a href=./lib/render-as-markdown.js#L27>/lib/render-as-markdown.js, line 27</a></div></article><article data-line=44><h2 id=rendering-the-document-as-markdown:replacing-document-link-placeholders-with-hyperlinks>Replacing document link placeholders with hyperlinks</h2><p>See also: <a class=doc-link href=#extract-document-links:replace-links>Extract Document Links&rarr;Replace Links</a>.</p><div class=source-ref>Source: <a href=./lib/render-as-markdown.js#L44>/lib/render-as-markdown.js, line 44</a></div></article><article data-line=62><blockquote><p>assume the rendered documentation is in the root directory of the repo</p></blockquote><div class=source-ref>Source: <a href=./lib/render-as-markdown.js#L62>/lib/render-as-markdown.js, line 62</a></div></article><article data-line=72><blockquote><p>replace doc-link placeholders with html anchor links</p></blockquote><div class=source-ref>Source: <a href=./lib/render-as-markdown.js#L72>/lib/render-as-markdown.js, line 72</a></div></article><article data-line=77><blockquote><p>display a reference to the source code this comment comes from.</p></blockquote><div class=source-ref>Source: <a href=./lib/render-as-markdown.js#L77>/lib/render-as-markdown.js, line 77</a></div></article></section><section data-filename=/tests/extract-c-comments.js><article data-line=1><h1 id=test-extracting-c-style-comments>Test Extracting C-Style Comments</h1><p>Test cases for <a class=doc-link href=#extract-c-style-comments>Extract C-Style Comments</a>.</p><p>This will be run as part of <code>npm test</code>.</p><div class=source-ref>Source: <a href=./tests/extract-c-comments.js#L1>/tests/extract-c-comments.js, line 1</a></div></article></section><section data-filename=/tests/extract-links.js><article data-line=1><h1 id=test-extracting-links>Test Extracting Links</h1><p>Test cases for <a class=doc-link href=#extract-document-links>Extract Document Links</a>.</p><p>This will be run as part of <code>npm test</code>.</p><div class=source-ref>Source: <a href=./tests/extract-links.js#L1>/tests/extract-links.js, line 1</a></div></article></section><section data-filename=/tests/parse-directives.js><article data-line=1><h1 id=test-parsing-directives>Test Parsing Directives</h1><p>Test cases for <a class=doc-link href=#parsing-directives>Parsing directives</a>.</p><p>This will be run as part of <code>npm test</code>.</p><div class=source-ref>Source: <a href=./tests/parse-directives.js#L1>/tests/parse-directives.js, line 1</a></div></article></section><section data-filename=/template/tpl.html><article data-line=4><h1 id=html-template>Html template</h1><p>This template is used when rendering docs to html, to wrap the markdown inside an html document.</p><div class=source-ref>Source: <a href=./template/tpl.html#L4>/template/tpl.html, line 4</a></div></article><article data-line=17><h2 id=html-template:default-styles>Default styles</h2><p>All of the default styles are embedded in the template, to avoid extra http requests and make distribution easier.</p><div class=source-ref>Source: <a href=./template/tpl.html#L17>/template/tpl.html, line 17</a></div></article><article data-line=76><blockquote><p>code blocks longer than section max width will scroll</p></blockquote><div class=source-ref>Source: <a href=./template/tpl.html#L76>/template/tpl.html, line 76</a></div></article></section></column></row></layout><script src=./assets/dist/js/main.min.js></script></body></html>